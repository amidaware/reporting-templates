{
  "base_template": {
    "name": "Jinja Base Template",
    "html": "<html>\n    <head>\n        <link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\">\n        <link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css\">\n        <style>\n            {{ css }}\n        </style>\n    </head>\n    <body>\n        {% block content %}{% endblock %}\n    </body>\n</html>"
  },
  "template": {
    "name": "NOC Dashboard v1.31",
    "template_css": "",
    "template_md": "{% block content %}\r\n\r\n<!-- Fixed header bar -->\r\n<div\r\n  style=\"position: fixed; top: 0; left: 0; width: 100%; background: #fff; z-index: 1000; height: 40px; padding: 4px; border-bottom: 1px solid #ddd;\">\r\n  <div style=\"display: flex; align-items: center; gap: 15px; white-space: nowrap; height: 100%;\">\r\n    <!-- Title -->\r\n    <h1 style=\"margin: 0; flex-shrink: 0;\">NOC PCR Dashboard v1.30</h1>\r\n\r\n    <!-- Restrict Summary Button & Dropdown -->\r\n    <div style=\"position: relative; display: inline-block; flex-shrink: 0;\">\r\n      <button id=\"alertDropdownBtn\" style=\"cursor: pointer; padding: 3px 6px;\">\r\n        Restrict summary to offline agents with these Alerts set\r\n      </button>\r\n      <div id=\"alertDropdownMenu\"\r\n        style=\"display: none; position: absolute; background: #fff; border: 1px solid #ccc; padding: 10px; z-index: 999; min-width: 140px; margin-top: 4px;\">\r\n        <label style=\"display: block; margin-bottom: 5px;\">\r\n          <input type=\"checkbox\" id=\"alertAll\"> All\r\n        </label>\r\n        <label style=\"display: block; margin-bottom: 5px;\">\r\n          <input type=\"checkbox\" id=\"alertText\"> Text Alert\r\n        </label>\r\n        <label style=\"display: block; margin-bottom: 5px;\">\r\n          <input type=\"checkbox\" id=\"alertEmail\"> Email Alert\r\n        </label>\r\n        <label style=\"display: block;\">\r\n          <input type=\"checkbox\" id=\"alertDashboard\"> Dashboard Alert\r\n        </label>\r\n        <!-- New \"Also show online\" checkbox -->\r\n        <label\r\n          style=\"display: block; margin-top: 10px; border-top: 1px solid #ccc; padding-top: 10px;\"\r\n          title=\"If IdleAlert custom field set to true and agent online show agent in list.\">\r\n          <input type=\"checkbox\" id=\"alsoShowOnline\">\r\n          Also show online IdleAlert TODO\r\n        </label>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- Search Box with Clear (\"x\") Button -->\r\n    <div style=\"position: relative; flex-shrink: 0;\">\r\n      <input type=\"text\" id=\"searchFilter\" placeholder=\"Search Client, Site, Hostname...\"\r\n             style=\"padding: 4px 30px 4px 8px; border-radius: 4px; border: 1px solid #ccc; width: 250px;\">\r\n      <span id=\"clearSearch\" style=\"position: absolute; right: 8px; top: 50%; transform: translateY(-50%);\r\n                                     cursor: pointer; font-weight: bold; display: none;\">&times;</span>\r\n    </div>\r\n\r\n    <!-- Reset Button -->\r\n    <div style=\"flex-shrink: 0;\">\r\n      <button id=\"resetDefaults\" style=\"padding: 4px 8px; margin-right: 5px;\">Reset</button>\r\n    </div>\r\n\r\n    <!-- Always Show Names Checkbox -->\r\n    <label style=\"margin: 0; flex-shrink: 0;\">\r\n      <input type=\"checkbox\" id=\"alwaysShowNames\"> Always show names\r\n    </label>\r\n\r\n    <!-- Current Time: Will be controlled entirely by JavaScript -->\r\n    <div style=\"font-size: 0.9em; color: #333; flex-shrink: 0;\">\r\n      <strong>Current Time:</strong><br>\r\n      <span id=\"current-time\">\r\n        <!-- Will be updated by JavaScript -->\r\n      </span>\r\n    </div>\r\n  </div>\r\n</div>\r\n\r\n<!-- The rest of the page content is wrapped in a container with top margin -->\r\n<div style=\"margin-top: 55px;\">\r\n  <!-- Grouped Summary for Offline/All Agents -->\r\n  <div id=\"offline-summary-container\">\r\n    <div class=\"client-container\" style=\"display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px;\">\r\n      {% for client, clientAgents in data_sources.allAgent\r\n           | sort(attribute='site__client__name')\r\n           | groupby(\"site__client__name\") %}\r\n      <div class=\"client-summary\" style=\"display: inline-flex; flex-direction: column; align-items: flex-start; border: 2px solid #3498db;\r\n                                         padding: 2px; border-radius: 8px; background-color: #ecf0f1;\r\n                                         box-shadow: 0 4px 8px rgba(52,152,219,0.3);\">\r\n        <!-- Client name (hidden by default) -->\r\n        <div class=\"client-name\"\r\n          style=\"display: none; position: relative; top: -12px; left: 8px; padding: 2px 6px;\r\n                                        background-color: rgba(52, 152, 219, 0.9); color: #fff; border-radius: 5px;\r\n                                        font-weight: bold; font-size: 0.9em; box-shadow: 0 0 8px rgba(52,152,219,0.8); z-index: 10;\">\r\n          {{ client }}\r\n        </div>\r\n        <!-- Site container -->\r\n        <div class=\"site-container\" style=\"display: flex; flex-wrap: wrap; gap: 5px;\">\r\n          {% for site, siteAgents in clientAgents\r\n               | sort(attribute='site__name')\r\n               | groupby(\"site__name\") %}\r\n          <div class=\"site-summary\" style=\"display: inline-flex; flex-direction: column; align-items: flex-start;\r\n                                           border: 1px solid #2ecc71; padding: 2px; border-radius: 8px;\r\n                                           background-color: #e9f7ef; box-shadow: 0 2px 4px rgba(46,204,113,0.3);\">\r\n            <!-- Site name (hidden by default) -->\r\n            <div class=\"site-name\"\r\n              style=\"display: none; position: relative; top: -10px; left: 6px; padding: 1px 4px;\r\n                                          background-color: rgba(46, 204, 113, 0.9); color: #fff; border-radius: 5px;\r\n                                          font-weight: normal; font-size: 0.85em; box-shadow: 0 0 6px rgba(46,204,113,0.7); z-index: 9;\">\r\n              {{ site }}\r\n            </div>\r\n            <!-- Agents -->\r\n            <div class=\"agent-grid\" style=\"display: inline-flex; flex-direction: row; gap: 3px;\">\r\n              {% for agent in siteAgents %}\r\n              {% set idle_alert = '' %}\r\n              {% if 'custom_fields' in agent and agent['custom_fields'] and 'IdleAlert' in agent['custom_fields'] %}\r\n                {% set idle_alert = agent['custom_fields']['IdleAlert']|string|lower %}\r\n              {% endif %}\r\n              <div class=\"agent-square\" data-id=\"{{ agent.id }}\"\r\n                data-last-seen=\"{% if agent.last_seen %}{{ agent.last_seen.timestamp() }}{% else %}0{% endif %}\"\r\n                data-offline-time=\"{{ agent.offline_time }}\"\r\n                data-overdue-text-alert=\"{{ agent.overdue_text_alert }}\"\r\n                data-overdue-email-alert=\"{{ agent.overdue_email_alert }}\"\r\n                data-overdue-dashboard-alert=\"{{ agent.overdue_dashboard_alert }}\"\r\n                data-idle-alert=\"{{ idle_alert }}\"\r\n                data-client=\"{{ agent.site__client__name }}\"\r\n                data-site=\"{{ agent.site__name }}\"\r\n                data-hostname=\"{{ agent.hostname }}\"\r\n                data-operating-system=\"{{ agent.operating_system }}\"\r\n                data-ram=\"{{ agent.total_ram }}\"\r\n                data-check-interval=\"{% if agent.check_interval %}{{ agent.check_interval }}{% else %}N/A{% endif %}\"\r\n                data-last-logged-in-user=\"{% if agent.logged_in_username == 'None' %}{{ agent.last_logged_in_user }}{% else %}{{ agent.logged_in_username }}{% endif %}\"\r\n                data-maintenance=\"{{ agent.maintenance_mode|string|lower }}\"\r\n                data-monitoring-type=\"{{ agent.monitoring_type }}\"\r\n                data-last-patched=\"{% if agent.patches_last_installed %}{{ agent.patches_last_installed.timestamp() }}{% else %}0{% endif %}\"\r\n                data-needs-reboot=\"{{ agent.needs_reboot|string|lower }}\"\r\n                style=\"width: 12px; height: 12px; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.3);\r\n                       background-color: grey; cursor: pointer;\">\r\n              </div>\r\n              {% endfor %}\r\n            </div>\r\n          </div>\r\n          {% endfor %}\r\n        </div>\r\n      </div>\r\n      {% endfor %}\r\n    </div>\r\n  </div>\r\n\r\n  <!-- New Grouped Summary for Online Idle Agents -->\r\n  <div id=\"online-summary-container\" style=\"display: none; margin-bottom: 20px;\">\r\n    <div id=\"idleAlertNotice\"\r\n         style=\"display:none; margin-bottom:8px; color:#c0392b; font-weight:bold;\">\r\n      No \"IdleAlert\" custom field was found on any agents.\r\n      To use this view, create a boolean custom field named <code>IdleAlert</code>\r\n      on your agents in TRMM custom_fields.\r\n    </div>\r\n    <h2 style=\"margin-bottom: 10px; padding-bottom: 5px; border-bottom: 1px solid #ccc;\">TODO Online Idle Agents</h2>\r\n    <div class=\"client-container\" style=\"display: flex; flex-wrap: wrap; gap: 10px;\">\r\n      {% for client, clientAgents in data_sources.allAgent\r\n           | sort(attribute='site__client__name')\r\n           | groupby(\"site__client__name\") %}\r\n      <div class=\"client-summary\" style=\"display: inline-flex; flex-direction: column; align-items: flex-start; border: 2px solid #3498db;\r\n                                         padding: 2px; border-radius: 8px; background-color: #ecf0f1;\r\n                                         box-shadow: 0 4px 8px rgba(52,152,219,0.3);\">\r\n        <div class=\"client-name\"\r\n          style=\"display: none; position: relative; top: -12px; left: 8px; padding: 2px 6px;\r\n                                        background-color: rgba(52, 152, 219, 0.9); color: #fff; border-radius: 5px;\r\n                                        font-weight: bold; font-size: 0.9em; box-shadow: 0 0 8px rgba(52,152,219,0.8); z-index: 10;\">\r\n          {{ client }}\r\n        </div>\r\n        <div class=\"site-container\" style=\"display: flex; flex-wrap: wrap; gap: 5px;\">\r\n          {% for site, siteAgents in clientAgents\r\n               | sort(attribute='site__name')\r\n               | groupby(\"site__name\") %}\r\n          <div class=\"site-summary\" style=\"display: inline-flex; flex-direction: column; align-items: flex-start;\r\n                                           border: 1px solid #2ecc71; padding: 2px; border-radius: 8px;\r\n                                           background-color: #e9f7ef; box-shadow: 0 2px 4px rgba(46,204,113,0.3);\">\r\n            <div class=\"site-name\"\r\n              style=\"display: none; position: relative; top: -10px; left: 6px; padding: 1px 4px;\r\n                                          background-color: rgba(46, 204, 113, 0.9); color: #fff; border-radius: 5px;\r\n                                          font-weight: normal; font-size: 0.85em; box-shadow: 0 0 6px rgba(46,204,113,0.7); z-index: 9;\">\r\n              {{ site }}\r\n            </div>\r\n            <div class=\"agent-grid\" style=\"display: inline-flex; flex-direction: row; gap: 3px;\">\r\n              {% for agent in siteAgents %}\r\n              {% set idle_alert = '' %}\r\n              {% if 'custom_fields' in agent and agent['custom_fields'] and 'IdleAlert' in agent['custom_fields'] %}\r\n                {% set idle_alert = agent['custom_fields']['IdleAlert']|string|lower %}\r\n              {% endif %}\r\n              <div class=\"agent-square\" data-id=\"{{ agent.id }}\"\r\n                data-last-seen=\"{% if agent.last_seen %}{{ agent.last_seen.timestamp() }}{% else %}0{% endif %}\"\r\n                data-offline-time=\"{{ agent.offline_time }}\"\r\n                data-overdue-text-alert=\"{{ agent.overdue_text_alert }}\"\r\n                data-overdue-email-alert=\"{{ agent.overdue_email_alert }}\"\r\n                data-overdue-dashboard-alert=\"{{ agent.overdue_dashboard_alert }}\"\r\n                data-idle-alert=\"{{ idle_alert }}\"\r\n                data-client=\"{{ agent.site__client__name }}\"\r\n                data-site=\"{{ agent.site__name }}\"\r\n                data-hostname=\"{{ agent.hostname }}\"\r\n                data-operating-system=\"{{ agent.operating_system }}\"\r\n                data-ram=\"{{ agent.total_ram }}\"\r\n                data-check-interval=\"{% if agent.check_interval %}{{ agent.check_interval }}{% else %}N/A{% endif %}\"\r\n                data-last-logged-in-user=\"{% if agent.logged_in_username == 'None' %}{{ agent.last_logged_in_user }}{% else %}{{ agent.logged_in_username }}{% endif %}\"\r\n                data-maintenance=\"{{ agent.maintenance_mode|string|lower }}\"\r\n                data-monitoring-type=\"{{ agent.monitoring_type }}\"\r\n                data-last-patched=\"{% if agent.patches_last_installed %}{{ agent.patches_last_installed.timestamp() }}{% else %}0{% endif %}\"\r\n                data-needs-reboot=\"{{ agent.needs_reboot|string|lower }}\"\r\n                style=\"width: 12px; height: 12px; border-radius: 5px; box-shadow: 0 0 5px rgba(0,0,0,0.3);\r\n                       background-color: grey; cursor: pointer;\">\r\n              </div>\r\n              {% endfor %}\r\n            </div>\r\n          </div>\r\n          {% endfor %}\r\n        </div>\r\n      </div>\r\n      {% endfor %}\r\n    </div>\r\n  </div>\r\n\r\n  <!-- Tooltip for agent info -->\r\n  <div id=\"agentTooltip\"\r\n    style=\"position: absolute; display: none; background: #fff; border: 1px solid #ccc;\r\n                                 padding: 5px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.2); z-index: 1000;\">\r\n  </div>\r\n\r\n  <!-- Original Table -->\r\n  <div class=\"table-responsive\" style=\"overflow-x: auto;\">\r\n    <table id=\"agentTable\" class=\"table table-sm\" style=\"width: 100%; border-collapse: collapse; margin-top: 20px;\">\r\n      <!-- Table Header -->\r\n      <thead>\r\n        <tr style=\"background-color: #f2f2f2;\">\r\n          <th style=\"padding: 1px 1px; border: 1px solid #ddd; text-align: left;\">Status</th>\r\n          <th style=\"padding: 1px 1px; border: 1px solid #ddd; text-align: left;\">\r\n            <i class=\"material-icons\">smartphone</i>\r\n          </th>\r\n          <th style=\"padding: 1px 1px; border: 1px solid #ddd; text-align: left;\">\r\n            <i class=\"material-icons\">email</i>\r\n          </th>\r\n          <th style=\"padding: 1px 1px; border: 1px solid #ddd; text-align: left;\">\r\n            <i class=\"material-icons\">notifications</i>\r\n          </th>\r\n          <th style=\"padding: 1px 1px; border: 1px solid #ddd; text-align: left;\"></th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\"></th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\"></th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Client Name</th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Site Name</th>\r\n          <!-- Host Details Column -->\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Host</th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Operating System</th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Disks</th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Alert Template</th>\r\n          <th style=\"padding: 8px 12px; border: 1px solid #ddd; text-align: left;\">Policy</th>\r\n        </tr>\r\n      </thead>\r\n\r\n      <!-- Table Body -->\r\n      <tbody>\r\n        {% for agent in data_sources.allAgent\r\n             | sort(attribute='hostname')\r\n             | sort(attribute='site__name')\r\n             | sort(attribute='site__client__name') %}\r\n        <tr data-id=\"{{ agent.id }}\"\r\n          data-last-seen=\"{% if agent.last_seen %}{{ agent.last_seen.timestamp() }}{% else %}0{% endif %}\"\r\n          data-offline-time=\"{{ agent.offline_time }}\"\r\n          style=\"background-color: {% if loop.index0 is even %}#f9f9f9{% else %}transparent{% endif %};\">\r\n          <td class=\"status\" style=\"padding: 8px 1px; border: 1px solid #ddd;\">Checking...</td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            <input type=\"checkbox\" disabled {% if agent.overdue_text_alert|string|lower == \"true\" %}checked{% endif %}>\r\n          </td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            <input type=\"checkbox\" disabled {% if agent.overdue_email_alert|string|lower == \"true\" %}checked{% endif %}>\r\n          </td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            <input type=\"checkbox\" disabled {% if agent.overdue_dashboard_alert|string|lower == \"true\" %}checked{% endif %}>\r\n          </td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            {% set plat = agent.plat|string|lower %}\r\n            {% if plat == \"windows\" %}\r\n            <i class=\"fab fa-windows\"></i>\r\n            {% elif plat == \"darwin\" %}\r\n            <i class=\"fab fa-apple\"></i>\r\n            {% elif plat == \"linux\" %}\r\n            <i class=\"fab fa-linux\"></i>\r\n            {% else %}\r\n            {{ agent.plat }}\r\n            {% endif %}\r\n          </td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            {% set mtype = agent.monitoring_type|string|lower %}\r\n            {% if mtype == \"workstation\" %}\r\n            <i class=\"material-icons\">laptop</i>\r\n            {% elif mtype == \"server\" %}\r\n            <i class=\"material-icons\">dns</i>\r\n            {% else %}\r\n            {{ agent.monitoring_type }}\r\n            {% endif %}\r\n          </td>\r\n          <td style=\"padding: 1px 1px; border: 1px solid #ddd;\">\r\n            {% if agent.maintenance_mode|string|lower == \"true\" %}\r\n            <i class=\"material-icons\">handyman</i>\r\n            {% endif %}\r\n          </td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">{{ agent.site__client__name }}</td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">{{ agent.site__name }}</td>\r\n          <!-- Host Details Column includes Pub IP, Boot Time, Last Seen, and Last Patched -->\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">\r\n            {% if agent.needs_reboot|string|lower == \"true\" %}\r\n            <i class=\"material-icons\" style=\"color:red;\">power_settings_new</i>\r\n            {% endif %}\r\n            {{ agent.hostname }}<br>\r\n            <b>Desc:</b> {{ agent.description }}<br>\r\n            <b>RAM:</b> {{ agent.total_ram }}GB<br>\r\n            <b>User:</b>\r\n            {% if agent.logged_in_username == \"None\" %}\r\n            <i>{{ agent.last_logged_in_user }}</i>\r\n            {% else %}\r\n            {{ agent.logged_in_username }}\r\n            {% endif %}\r\n            <br>\r\n            <b>Pub IP:</b> {{ agent.public_ip }}<br>\r\n            <b>Boot Time:</b> <span class=\"boot-time\">{{ agent.boot_time }}</span><br>\r\n            <b>Last Seen:</b>\r\n            {% if agent.last_seen %}\r\n            <span class=\"last-seen\" data-last-seen=\"{{ agent.last_seen.timestamp() }}\"></span>\r\n            {% else %}\r\n            N/A\r\n            {% endif %}\r\n            <br>\r\n            <b>Last Patched:</b>\r\n            {% if agent.patches_last_installed %}\r\n            <span class=\"last-patched\" data-last-patched=\"{{ agent.patches_last_installed.timestamp() }}\"></span>\r\n            {% else %}\r\n            N/A\r\n            {% endif %}\r\n            <br>\r\n            <b>Offline:</b> {{ agent.offline_time }} | <b>Overdue:</b> {{ agent.overdue_time }} | <b>Check Int:</b> {{ agent.check_interval }}\r\n            {% if agent.block_policy_inheritance|string|lower == \"true\" %}\r\n            <span style=\"color: orange; font-weight: bold;\">Policy Inheritance Blocked</span>\r\n            {% endif %}\r\n            <br>\r\n            <b>TRMM Ver:</b> {{ agent.version }}\r\n          </td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">{{ agent.operating_system }}</td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd%;\">\r\n            {% if agent.disks %}\r\n            {% for disk in agent.disks %}\r\n            <div style=\"margin-bottom: 8px;\">\r\n              <!-- Disk Header: Device and Total Capacity -->\r\n              <div style=\"font-size: 0.9em; margin-bottom: 2px;\">\r\n                Device: {{ disk.device }} - Total: {{ disk.total }}\r\n              </div>\r\n              <!-- Progress Bar: Represents Percentage Used -->\r\n              <div\r\n                style=\"position: relative; width: 100%; background-color: #e0e0e0; height: 10px; border-radius: 5px;\">\r\n                <div style=\"width: {{ disk.percent }}%; height: 100%; border-radius: 5px; background-color:\r\n                      {% if disk.percent|float >= 80 %}\r\n                        #ff4d4d\r\n                      {% elif disk.percent|float >= 60 %}\r\n                        #ffa500\r\n                      {% else %}\r\n                        #4CAF50\r\n                      {% endif %}\r\n                    ;\"></div>\r\n              </div>\r\n              <!-- Disk Details: Used and Free space with the Percentage -->\r\n              <div style=\"font-size: 0.8em; margin-top: 2px;\">\r\n                Used: {{ disk.used }} ({{ disk.percent }}%) - Free: {{ disk.free }}\r\n              </div>\r\n            </div>\r\n            {% endfor %}\r\n            {% else %}\r\n            N/A\r\n            {% endif %}\r\n          </td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">{{ agent.alert_template }}</td>\r\n          <td style=\"padding: 8px 12px; border: 1px solid #ddd;\">{{ agent.policy }}</td>\r\n        </tr>\r\n        {% endfor %}\r\n      </tbody>\r\n    </table>\r\n  </div>\r\n\r\n</div> <!-- End of margin-top container -->\r\n\r\n<script>\r\n  /* -------------------------------------------\r\n     JS for NOC Dashboard\r\n     - Persist checkbox and search states\r\n     - Offline/online status\r\n     - Online IdleAlert view + notice if no IdleAlert field\r\n     - Tooltip with:\r\n       * \"Offline since ...\" (red, only when offline)\r\n       * Needs Reboot: Yes (red)\r\n       * Last patched in local time\r\n     - Local timezone formatting for boot, last seen, last patched\r\n  ------------------------------------------- */\r\n  const ALERT_ALL_DEFAULT         = 0;\r\n  const ALERT_TEXT_DEFAULT        = 0;\r\n  const ALERT_EMAIL_DEFAULT       = 0;\r\n  const ALERT_DASHBOARD_DEFAULT   = 0;\r\n  const ALSO_SHOW_ONLINE_DEFAULT  = 0;\r\n  const ALWAYS_SHOW_NAMES_DEFAULT = 0;\r\n\r\n  document.addEventListener(\"DOMContentLoaded\", function () {\r\n    const alertAll           = document.getElementById(\"alertAll\");\r\n    const alertText          = document.getElementById(\"alertText\");\r\n    const alertEmail         = document.getElementById(\"alertEmail\");\r\n    const alertDashboard     = document.getElementById(\"alertDashboard\");\r\n    const alsoShowOnlineChk  = document.getElementById(\"alsoShowOnline\");\r\n    const alwaysShowNamesChk = document.getElementById(\"alwaysShowNames\");\r\n    const searchFilterInput  = document.getElementById(\"searchFilter\");\r\n    const clearSearch        = document.getElementById(\"clearSearch\");\r\n    const resetDefaultsBtn   = document.getElementById(\"resetDefaults\");\r\n    const tooltip            = document.getElementById(\"agentTooltip\");\r\n    const offlineSummaryContainer = document.getElementById(\"offline-summary-container\");\r\n    const onlineSummaryContainer  = document.getElementById(\"online-summary-container\");\r\n    const idleAlertNotice    = document.getElementById(\"idleAlertNotice\");\r\n\r\n    // 1) Initialize checkboxes from localStorage if available, otherwise use defaults\r\n    alertAll.checked = (localStorage.getItem(\"alertAll\") || ALERT_ALL_DEFAULT) === \"1\";\r\n    alertText.checked = (localStorage.getItem(\"alertText\") || ALERT_TEXT_DEFAULT) === \"1\";\r\n    alertEmail.checked = (localStorage.getItem(\"alertEmail\") || ALERT_EMAIL_DEFAULT) === \"1\";\r\n    alertDashboard.checked = (localStorage.getItem(\"alertDashboard\") || ALERT_DASHBOARD_DEFAULT) === \"1\";\r\n    alsoShowOnlineChk.checked = (localStorage.getItem(\"alsoShowOnline\") || ALSO_SHOW_ONLINE_DEFAULT) === \"1\";\r\n    alwaysShowNamesChk.checked = (localStorage.getItem(\"alwaysShowNames\") || ALWAYS_SHOW_NAMES_DEFAULT) === \"1\";\r\n\r\n    // 2) Initialize search input from localStorage if available\r\n    searchFilterInput.value = localStorage.getItem(\"searchFilter\") || \"\";\r\n\r\n    // Search event listener\r\n    searchFilterInput.addEventListener('input', () => {\r\n      localStorage.setItem(\"searchFilter\", searchFilterInput.value);\r\n      const searchTerm = searchFilterInput.value.trim().toLowerCase();\r\n      clearSearch.style.display = searchTerm === \"\" ? \"none\" : \"block\";\r\n      filterSquares();\r\n    });\r\n\r\n    // Clear search when clicking the \"x\"\r\n    clearSearch.addEventListener('click', () => {\r\n      searchFilterInput.value = \"\";\r\n      clearSearch.style.display = \"none\";\r\n      searchFilterInput.dispatchEvent(new Event('input'));\r\n    });\r\n\r\n    // Reset button: reload default values\r\n    resetDefaultsBtn.addEventListener(\"click\", () => {\r\n      localStorage.setItem(\"alertAll\", ALERT_ALL_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertText\", ALERT_TEXT_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertEmail\", ALERT_EMAIL_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertDashboard\", ALERT_DASHBOARD_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alsoShowOnline\", ALSO_SHOW_ONLINE_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alwaysShowNames\", ALWAYS_SHOW_NAMES_DEFAULT ? \"1\" : \"0\");\r\n      localStorage.setItem(\"searchFilter\", \"\");\r\n\r\n      alertAll.checked = ALERT_ALL_DEFAULT === 1;\r\n      alertText.checked = ALERT_TEXT_DEFAULT === 1;\r\n      alertEmail.checked = ALERT_EMAIL_DEFAULT === 1;\r\n      alertDashboard.checked = ALERT_DASHBOARD_DEFAULT === 1;\r\n      alsoShowOnlineChk.checked = ALSO_SHOW_ONLINE_DEFAULT === 1;\r\n      alwaysShowNamesChk.checked = ALWAYS_SHOW_NAMES_DEFAULT === 1;\r\n      searchFilterInput.value = \"\";\r\n\r\n      location.reload();\r\n    });\r\n\r\n    // Alerts dropdown\r\n    const dropdownBtn  = document.getElementById(\"alertDropdownBtn\");\r\n    const dropdownMenu = document.getElementById(\"alertDropdownMenu\");\r\n    dropdownBtn.addEventListener(\"click\", () => {\r\n      dropdownMenu.style.display = (dropdownMenu.style.display === \"block\") ? \"none\" : \"block\";\r\n    });\r\n    window.addEventListener(\"click\", (e) => {\r\n      if (!dropdownBtn.contains(e.target) && !dropdownMenu.contains(e.target)) {\r\n        dropdownMenu.style.display = \"none\";\r\n      }\r\n    });\r\n\r\n    // \"All\" toggles other checkboxes and saves state\r\n    alertAll.addEventListener(\"change\", function () {\r\n      const checked = this.checked;\r\n      alertText.checked = alertEmail.checked = alertDashboard.checked = checked;\r\n      localStorage.setItem(\"alertAll\", checked ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertText\", checked ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertEmail\", checked ? \"1\" : \"0\");\r\n      localStorage.setItem(\"alertDashboard\", checked ? \"1\" : \"0\");\r\n      filterSquares();\r\n    });\r\n\r\n    // Listen to changes on individual filter checkboxes (including alsoShowOnline & alwaysShowNames)\r\n    [alertText, alertEmail, alertDashboard, alsoShowOnlineChk, alwaysShowNamesChk].forEach(chk => {\r\n      chk.addEventListener(\"change\", function () {\r\n        localStorage.setItem(this.id, this.checked ? \"1\" : \"0\");\r\n\r\n        if (this.id !== 'alsoShowOnline' && this.id !== 'alwaysShowNames') {\r\n          alertAll.checked = alertText.checked && alertEmail.checked && alertDashboard.checked;\r\n          localStorage.setItem(\"alertAll\", alertAll.checked ? \"1\" : \"0\");\r\n        }\r\n\r\n        // When \"Also show online\" is turned on, check if any IdleAlert field exists\r\n        if (this.id === 'alsoShowOnline') {\r\n          if (this.checked) {\r\n            const hasIdleAlert = Array.from(document.querySelectorAll('.agent-square'))\r\n              .some(sq => sq.dataset.idleAlert && sq.dataset.idleAlert !== \"\");\r\n            if (!hasIdleAlert && idleAlertNotice) {\r\n              idleAlertNotice.style.display = \"block\";\r\n            }\r\n          } else if (idleAlertNotice) {\r\n            idleAlertNotice.style.display = \"none\";\r\n          }\r\n        }\r\n\r\n        filterSquares();\r\n      });\r\n    });\r\n\r\n    function updateSiteClientVisibility(container) {\r\n      container.querySelectorAll(\".site-summary\").forEach(site => {\r\n        const visibleAgents = Array.from(site.querySelectorAll('.agent-square')).some(sq => sq.style.display !== \"none\");\r\n        site.style.display = visibleAgents ? \"inline-flex\" : \"none\";\r\n      });\r\n      container.querySelectorAll(\".client-summary\").forEach(client => {\r\n        const visibleSites = Array.from(client.querySelectorAll('.site-summary')).some(site => site.style.display !== \"none\");\r\n        client.style.display = visibleSites ? \"inline-flex\" : \"none\";\r\n      });\r\n    }\r\n\r\n    // Tooltip for agent info (with Offline since, red Needs Reboot, fixed Last Patched)\r\n    document.querySelectorAll(\".agent-square\").forEach(sq => {\r\n      sq.addEventListener(\"mouseenter\", () => {\r\n        const client        = sq.dataset.client || \"\";\r\n        const site          = sq.dataset.site || \"\";\r\n        const hostname      = sq.dataset.hostname || \"\";\r\n        const os            = sq.dataset.operatingSystem || \"\";\r\n        const ram           = sq.dataset.ram || \"\";\r\n        const checkInterval = sq.dataset.checkInterval || \"\";\r\n        const lastUser      = sq.dataset.lastLoggedInUser || \"\";\r\n        const maintenance   = (sq.dataset.maintenance === \"true\") ? \"Yes\" : \"No\";\r\n\r\n        // Needs Reboot: Yes is red\r\n        const needsReboot   = (sq.dataset.needsReboot === \"true\")\r\n          ? '<span style=\"color:red; font-weight:bold;\">Yes</span>'\r\n          : 'No';\r\n\r\n        // Last patched from square's data-last-patched\r\n        const lastPatchedTs = parseFloat(sq.dataset.lastPatched || \"0\");\r\n        let lastPatched = \"N/A\";\r\n        if (!isNaN(lastPatchedTs) && lastPatchedTs > 0) {\r\n          const lpDate = new Date(lastPatchedTs * 1000);\r\n          const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n          lastPatched = lpDate.toLocaleString(undefined, {\r\n            timeZone: userTimeZone,\r\n            timeZoneName: \"short\"\r\n          });\r\n        }\r\n\r\n        // Last online (from last_seen) in user's local timezone\r\n        const lastSeenTs = parseFloat(sq.dataset.lastSeen || \"0\");\r\n        let lastOnline = \"N/A\";\r\n        if (!isNaN(lastSeenTs) && lastSeenTs > 0) {\r\n          const lastSeenDate = new Date(lastSeenTs * 1000);\r\n          const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n          lastOnline = lastSeenDate.toLocaleString(undefined, {\r\n            timeZone: userTimeZone,\r\n            timeZoneName: \"short\"\r\n          });\r\n        }\r\n\r\n        tooltip.innerHTML = `\r\n          <div style=\"min-width: 220px;\">\r\n            <div style=\"font-weight: bold; font-size: 1.05em; margin-bottom: 5px;\">\r\n              ${client} - ${site}\r\n            </div>\r\n            <table style=\"border-collapse: collapse; width: 100%; font-size: 0.9em;\">\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Host:</td>\r\n                <td style=\"padding: 2px;\">\r\n                  ${hostname}\r\n                  ${\r\n                    sq.dataset.status === \"offline\"\r\n                      ? `<span style=\"color:red; font-weight:bold; margin-left:6px;\">Offline since ${lastOnline}</span>`\r\n                      : ``\r\n                  }\r\n                </td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">OS:</td>\r\n                <td style=\"padding: 2px;\">${os}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">RAM (GB):</td>\r\n                <td style=\"padding: 2px;\">${ram}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Last User:</td>\r\n                <td style=\"padding: 2px;\">${lastUser}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Last Patched:</td>\r\n                <td style=\"padding: 2px;\">${lastPatched}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Check Interval:</td>\r\n                <td style=\"padding: 2px;\">${checkInterval}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Needs Reboot:</td>\r\n                <td style=\"padding: 2px;\">${needsReboot}</td>\r\n              </tr>\r\n              <tr>\r\n                <td style=\"font-weight: bold; padding: 2px;\">Maintenance:</td>\r\n                <td style=\"padding: 2px;\">${maintenance}</td>\r\n              </tr>\r\n            </table>\r\n          </div>\r\n        `;\r\n        tooltip.style.display = \"block\";\r\n      });\r\n\r\n      sq.addEventListener(\"mousemove\", (e) => {\r\n        const tooltipWidth  = tooltip.offsetWidth;\r\n        const tooltipHeight = tooltip.offsetHeight;\r\n        let newLeft         = e.pageX + 10;\r\n        let newTop          = e.pageY + 10;\r\n\r\n        if (newLeft + tooltipWidth > window.innerWidth + window.scrollX) {\r\n          newLeft = e.pageX - tooltipWidth - 10;\r\n        }\r\n        if (newTop + tooltipHeight > window.innerHeight + window.scrollY) {\r\n          newTop = e.pageY - tooltipHeight - 10;\r\n        }\r\n        tooltip.style.left = newLeft + \"px\";\r\n        tooltip.style.top  = newTop + \"px\";\r\n      });\r\n\r\n      sq.addEventListener(\"mouseleave\", () => {\r\n        tooltip.style.display = \"none\";\r\n      });\r\n    });\r\n\r\n    // Update status for all squares (in both sections) and table rows\r\n    function updateStatus() {\r\n      const now = new Date();\r\n      document.querySelectorAll(\".agent-square\").forEach(sq => {\r\n        const offlineTime = parseInt(sq.dataset.offlineTime, 10);\r\n        const lastSeenTimestamp = parseFloat(sq.dataset.lastSeen);\r\n        const lastSeenDate = new Date(lastSeenTimestamp * 1000);\r\n        if (isNaN(lastSeenDate.getTime()) || isNaN(offlineTime)) {\r\n          sq.style.backgroundColor = \"orange\";\r\n          sq.dataset.status = \"error\";\r\n          return;\r\n        }\r\n        const diffMinutes = Math.round((now - lastSeenDate) / 60000);\r\n        if (diffMinutes <= offlineTime) {\r\n          sq.style.backgroundColor = \"green\";\r\n          sq.dataset.status = \"online\";\r\n        } else {\r\n          sq.style.backgroundColor = \"red\";\r\n          sq.dataset.status = \"offline\";\r\n        }\r\n      });\r\n\r\n      // Update the status text in the main table\r\n      document.querySelectorAll(\"#agentTable tbody tr\").forEach(row => {\r\n        const agentId = row.getAttribute(\"data-id\");\r\n        const square = document.querySelector(`.agent-square[data-id=\"${agentId}\"]`);\r\n        if (square) {\r\n          const statusCell = row.querySelector(\".status\");\r\n          if (square.dataset.status === \"online\") {\r\n            statusCell.textContent = \"✔ Online\";\r\n            statusCell.style.color = \"green\";\r\n          } else if (square.dataset.status === \"offline\") {\r\n            statusCell.textContent = \"✖ Offline\";\r\n            statusCell.style.color = \"red\";\r\n          } else {\r\n            statusCell.textContent = \"Error\";\r\n            statusCell.style.color = \"orange\";\r\n          }\r\n        }\r\n      });\r\n    }\r\n\r\n    function filterSquares() {\r\n      const filterText      = alertText.checked;\r\n      const filterEmail     = alertEmail.checked;\r\n      const filterDashboard = alertDashboard.checked;\r\n      const anyAlertFilter  = filterText || filterEmail || filterDashboard;\r\n      const showOnline      = alsoShowOnlineChk.checked;\r\n      const searchTerm      = searchFilterInput.value.trim().toLowerCase();\r\n\r\n      // Show/hide the entire online summary container\r\n      onlineSummaryContainer.style.display = showOnline ? \"block\" : \"none\";\r\n\r\n      // Filter offline container squares\r\n      offlineSummaryContainer.querySelectorAll(\".agent-square\").forEach(sq => {\r\n        let isVisible = true;\r\n        // Alert filtering: if any alert filter is on, only show offline agents that match\r\n        if (anyAlertFilter) {\r\n          if (sq.dataset.status !== \"offline\") {\r\n            isVisible = false;\r\n          } else {\r\n            let matchesAlert = false;\r\n            if (filterText && sq.dataset.overdueTextAlert.toLowerCase() === \"true\") matchesAlert = true;\r\n            if (filterEmail && sq.dataset.overdueEmailAlert.toLowerCase() === \"true\") matchesAlert = true;\r\n            if (filterDashboard && sq.dataset.overdueDashboardAlert.toLowerCase() === \"true\") matchesAlert = true;\r\n            if (!matchesAlert) isVisible = false;\r\n          }\r\n        }\r\n        // Search filtering\r\n        if (isVisible && searchTerm) {\r\n          const matchesSearch = [\r\n            sq.dataset.client, sq.dataset.site, sq.dataset.hostname,\r\n            sq.dataset.operatingSystem, sq.dataset.lastLoggedInUser\r\n          ].some(text => text && text.toLowerCase().includes(searchTerm));\r\n          if (!matchesSearch) isVisible = false;\r\n        }\r\n        sq.style.display = isVisible ? \"inline-block\" : \"none\";\r\n      });\r\n\r\n      // Filter online container squares (IdleAlert view)\r\n      if (showOnline) {\r\n        onlineSummaryContainer.querySelectorAll(\".agent-square\").forEach(sq => {\r\n          let isVisible = true;\r\n          // Basic criteria: Must be online and have idle alert true\r\n          if (sq.dataset.status !== \"online\" || sq.dataset.idleAlert !== \"true\") {\r\n            isVisible = false;\r\n          }\r\n          // Search filtering\r\n          if (isVisible && searchTerm) {\r\n            const matchesSearch = [\r\n              sq.dataset.client, sq.dataset.site, sq.dataset.hostname,\r\n              sq.dataset.operatingSystem, sq.dataset.lastLoggedInUser\r\n            ].some(text => text && text.toLowerCase().includes(searchTerm));\r\n            if (!matchesSearch) isVisible = false;\r\n          }\r\n          sq.style.display = isVisible ? \"inline-block\" : \"none\";\r\n        });\r\n      }\r\n\r\n      // Update visibility of clients and sites in both containers\r\n      updateSiteClientVisibility(offlineSummaryContainer);\r\n      if (showOnline) {\r\n        updateSiteClientVisibility(onlineSummaryContainer);\r\n      }\r\n\r\n      // Show names if 'always show names' is checked or if any alert filter is active\r\n      const shouldShowNames = alwaysShowNamesChk.checked || anyAlertFilter;\r\n      document.querySelectorAll(\".client-name, .site-name\").forEach(el => {\r\n        const parentSummary = el.closest('.client-summary, .site-summary');\r\n        if (parentSummary && parentSummary.style.display !== 'none') {\r\n          el.style.display = shouldShowNames ? \"block\" : \"none\";\r\n        } else {\r\n          el.style.display = \"none\";\r\n        }\r\n      });\r\n\r\n      filterTableRows();\r\n    }\r\n\r\n    function filterTableRows() {\r\n      document.querySelectorAll(\"#agentTable tbody tr\").forEach(row => {\r\n        const agentId = row.getAttribute(\"data-id\");\r\n        const offlineSquare = offlineSummaryContainer.querySelector(`.agent-square[data-id=\"${agentId}\"]`);\r\n        const onlineSquare  = onlineSummaryContainer.querySelector(`.agent-square[data-id=\"${agentId}\"]`);\r\n\r\n        const isVisible = (offlineSquare && offlineSquare.style.display !== \"none\") ||\r\n                          (onlineSquare && onlineSquare.style.display !== \"none\");\r\n\r\n        row.style.display = isVisible ? \"\" : \"none\";\r\n      });\r\n    }\r\n\r\n    // Initial setup\r\n    updateStatus();\r\n    filterSquares();\r\n\r\n    // If \"Also show online\" was already enabled on load, show the IdleAlert notice if needed\r\n    if (alsoShowOnlineChk.checked && idleAlertNotice) {\r\n      const hasIdleAlert = Array.from(document.querySelectorAll('.agent-square'))\r\n        .some(sq => sq.dataset.idleAlert && sq.dataset.idleAlert !== \"\");\r\n      if (!hasIdleAlert) {\r\n        idleAlertNotice.style.display = \"block\";\r\n      }\r\n    }\r\n\r\n    // ---- Time Formatting Functions ----\r\n\r\n    function updateCurrentTime() {\r\n      const currentTimeElem = document.getElementById('current-time');\r\n      if (!currentTimeElem) return;\r\n      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n\r\n      function setClock() {\r\n        currentTimeElem.textContent = new Date().toLocaleString(undefined, {\r\n          hour: '2-digit', minute: '2-digit', second: '2-digit',\r\n          timeZone: userTimeZone, timeZoneName: 'short'\r\n        });\r\n      }\r\n      setClock();\r\n      setInterval(setClock, 1000);\r\n    }\r\n\r\n    function updateTimeFields(selector, attribute) {\r\n      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n      document.querySelectorAll(selector).forEach(function (el) {\r\n        const ts = parseFloat((attribute ? el.getAttribute(attribute) : null) || el.textContent.trim());\r\n        if (!isNaN(ts) && ts > 0) {\r\n          const date = new Date(ts * 1000);\r\n          el.textContent = date.toLocaleString(undefined, { timeZone: userTimeZone, timeZoneName: 'short' });\r\n        }\r\n      });\r\n    }\r\n\r\n    function updateLastSeen() {\r\n      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n      const now = new Date();\r\n      document.querySelectorAll('.last-seen').forEach(function (span) {\r\n        const ts = parseFloat(span.getAttribute('data-last-seen'));\r\n        if (!isNaN(ts) && ts > 0) {\r\n          const lastSeenDate = new Date(ts * 1000);\r\n          const formatted = lastSeenDate.toLocaleString(undefined, { timeZone: userTimeZone, timeZoneName: 'short' });\r\n          const diffMinutes = Math.round((now - lastSeenDate) / 60000);\r\n          span.textContent = `${formatted} (${diffMinutes} mins ago)`;\r\n        } else {\r\n          span.textContent = \"N/A\";\r\n        }\r\n      });\r\n    }\r\n\r\n    function updateLastPatched() {\r\n      const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone;\r\n      const now = new Date();\r\n      const thirtyDaysMs = 30 * 24 * 60 * 60 * 1000;\r\n      document.querySelectorAll('.last-patched').forEach(function (span) {\r\n        const ts = parseFloat(span.getAttribute('data-last-patched'));\r\n        if (!isNaN(ts) && ts > 0) {\r\n          const date = new Date(ts * 1000);\r\n          const formatted = date.toLocaleString(undefined, { timeZone: userTimeZone, timeZoneName: 'short' });\r\n          const color = (now - date > thirtyDaysMs) ? 'red' : 'green';\r\n          span.innerHTML = `<span style=\"color: ${color};\">${formatted}</span>`;\r\n        } else {\r\n          span.textContent = \"N/A\";\r\n        }\r\n      });\r\n    }\r\n\r\n    // Call all date/time formatting functions\r\n    updateCurrentTime();\r\n    updateTimeFields('.boot-time', null);\r\n    updateLastSeen();\r\n    updateLastPatched();\r\n  });\r\n</script>\r\n\r\n{% endblock %}",
    "type": "html",
    "depends_on": [],
    "template_variables": "data_sources:\n  allAgent:\n    limit: 10000\n    model: agent    \n    defer:\n    - services\n    - wmi_detail\n    only:\n    - id\n    - created_by\n    - created_time\n    - modified_by\n    - modified_time\n    - version\n    - operating_system\n    - plat\n    - goarch\n    - hostname\n    - agent_id\n    - last_seen\n    - public_ip\n    - total_ram\n    - disks\n    - boot_time\n    - logged_in_username\n    - last_logged_in_user\n    - monitoring_type\n    - description\n    - mesh_node_id\n    - overdue_email_alert\n    - overdue_text_alert\n    - overdue_dashboard_alert\n    - offline_time\n    - overdue_time\n    - check_interval\n    - needs_reboot\n    - choco_installed\n    - patches_last_installed\n    - time_zone\n    - maintenance_mode\n    - block_policy_inheritance\n    - alert_template\n    - site\n    - policy\n    - site__name\n    - site__client__name\n    custom_fields:\n    - IdleAlert"
  },
  "assets": []
}