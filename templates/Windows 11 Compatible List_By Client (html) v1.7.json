{
  "base_template": {
    "name": "Bootstrap Base",
    "html": "<!doctype html>\n<html lang=\"en\">\n    <head>\n        <style>\n            {{css}}\n        </style>\n        <link href=\"https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css\" rel=\"stylesheet\" integrity=\"sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC\" crossorigin=\"anonymous\">\n    </head>\n    <body>\n        {% block content %}{% endblock %}\n    </body>\n</html>"
  },
  "template": {
    "name": "Windows 11 Compatible List_By Client (html) v1.7",
    "template_css": "",
    "template_md": "{% block content %}\r\n<style>\r\n  /* PDF Page Settings */\r\n  @page {\r\n    margin: 0.5in;\r\n  }\r\n\r\n  /* Color Palette */\r\n  :root {\r\n    --header-bg: #2c3e50; /* Dark Slate Blue */\r\n    --header-text: #ffffff;\r\n    --border-color: #dddddd;\r\n    --table-header-bg: #f2f2f2;\r\n    --status-ready-bg: #eaf7ec; /* Soft Green */\r\n    --status-ready-badge: #28a745;\r\n    --status-not-ready-bg: #fbebee; /* Soft Red */\r\n    --status-not-ready-badge: #dc3545;\r\n    --status-unknown-bg: #fff9e6; /* Soft Yellow */\r\n    --status-unknown-badge: #ffc107;\r\n    --danger-text: #dc3545;\r\n  }\r\n\r\n  /* General Typography & Layout */\r\n  body {\r\n    font-family: sans-serif;\r\n    color: #333;\r\n  }\r\n  .section {\r\n    margin-top: 20px;\r\n  }\r\n  .text-danger {\r\n    color: var(--danger-text);\r\n    font-weight: bold;\r\n  }\r\n\r\n  /* Report Header */\r\n  .report-header {\r\n    background-color: var(--header-bg);\r\n    color: var(--header-text);\r\n    padding: 20px;\r\n    border-radius: 8px;\r\n    display: flex;\r\n    align-items: center;\r\n  }\r\n  .header-logo {\r\n    width: 80px;\r\n    margin-right: 25px;\r\n    flex-shrink: 0; \r\n  }\r\n  .header-titles {\r\n    /* No special sizing needed */\r\n  }\r\n  .header-date {\r\n    margin-left: auto; /* Pushes this block to the far right */\r\n    text-align: right;\r\n    white-space: nowrap; /* Prevents date from wrapping */\r\n  }\r\n  .report-header h1 {\r\n    font-size: 24px;\r\n    font-weight: bold;\r\n    margin: 0 0 5px 0;\r\n  }\r\n  .report-header h2 {\r\n    font-size: 16px;\r\n    font-weight: normal;\r\n    margin: 0;\r\n    opacity: 0.9;\r\n  }\r\n\r\n  /* Main Data Table */\r\n  .report-table {\r\n    border-collapse: collapse;\r\n    width: 100%;\r\n    font-size: 12px;\r\n  }\r\n  .report-table th, .report-table td {\r\n    border: 1px solid var(--border-color);\r\n    padding: 8px 12px;\r\n    text-align: left;\r\n    vertical-align: middle;\r\n  }\r\n  .report-table thead th {\r\n    background-color: var(--table-header-bg);\r\n    font-weight: bold;\r\n  }\r\n  .report-table tbody tr.status-ready { background-color: var(--status-ready-bg); }\r\n  .report-table tbody tr.status-not-ready { background-color: var(--status-not-ready-bg); }\r\n  .report-table tbody tr.status-unknown { background-color: var(--status-unknown-bg); }\r\n\r\n  /* Status Badges */\r\n  .status-badge {\r\n    display: inline-block;\r\n    padding: 4px 10px;\r\n    border-radius: 12px;\r\n    color: #fff;\r\n    font-weight: bold;\r\n    font-size: 11px;\r\n    text-align: center;\r\n    white-space: nowrap;\r\n  }\r\n  .badge-ready { background-color: var(--status-ready-badge); }\r\n  .badge-not-ready { background-color: var(--status-not-ready-badge); }\r\n  .badge-unknown { background-color: var(--status-unknown-badge); color: #333; }\r\n  .badge-already { background-color: #17a2b8; } /* Info Blue */\r\n\r\n</style>\r\n\r\n<div class=\"report-header\">\r\n  <div class=\"header-logo\">\r\n    <img src=\"https://github.com/amidaware/reporting-templates/blob/master/assets/gbtnavy%20(256).png?raw=true\" alt=\"Amidaware Logo\" style=\"width: 80px; height: auto;\">\r\n  </div>\r\n  <div class=\"header-titles\">\r\n    <h1>Windows 11 Compatibility Report</h1>\r\n    <h2>Client: {{ client.name }}</h2>\r\n  </div>\r\n  <div class=\"header-date\">\r\n    <h2>Report Date:<br>{{ report_run_timestamp.strftime('%B %d, %Y') }}</h2>\r\n  </div>\r\n</div>\r\n\r\n<div class=\"section\">\r\n  <table class=\"report-table\">\r\n    <thead>\r\n      <tr>\r\n        <th>Client</th>\r\n        <th>Site</th>\r\n        <th>Device Name</th>\r\n        <th>User</th>\r\n        <th>Operating System</th>\r\n        <th style=\"text-align: center;\">Windows 11 Compatibility</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n      {% set not_ready_devices, ready_devices, already_devices = [], [], [] %}\r\n      {% for device in data_sources.agentsList %}\r\n          {% if device.plat and device.plat|lower == \"windows\" %}\r\n              {% if device.custom_fields.Windows11Comp %}\r\n                  {% if device.custom_fields.Windows11Comp == \"Windows 11 Ready\" %}\r\n                      {% set _ = ready_devices.append(device) %}\r\n                  {% elif device.custom_fields.Windows11Comp == \"Already Windows 11\" %}\r\n                      {% set _ = already_devices.append(device) %}\r\n                  {% else %}\r\n                      {% set _ = not_ready_devices.append(device) %}\r\n                  {% endif %}\r\n              {% else %}\r\n                  {% set _ = not_ready_devices.append(device) %}\r\n              {% endif %}\r\n          {% endif %}\r\n      {% endfor %}\r\n      {% set sorted_devices = (not_ready_devices | sort(attribute='hostname') | sort(attribute='site__name')) + \r\n                                (ready_devices | sort(attribute='hostname') | sort(attribute='site__name')) + \r\n                                (already_devices | sort(attribute='hostname') | sort(attribute='site__name')) %}\r\n\r\n      {% for device in sorted_devices %}\r\n      {% set row_class = 'status-unknown' %}\r\n      {% set badge_class = 'badge-unknown' %}\r\n      {% set status_text = 'Update custom_field' %}\r\n      {% if device.custom_fields.Windows11Comp %}\r\n          {% if device.custom_fields.Windows11Comp == \"Windows 11 Ready\" %}\r\n              {% set row_class = 'status-ready' %}\r\n              {% set badge_class = 'badge-ready' %}\r\n              {% set status_text = 'Ready' %}\r\n          {% elif device.custom_fields.Windows11Comp == \"Already Windows 11\" %}\r\n              {% set row_class = 'status-ready' %}\r\n              {% set badge_class = 'badge-already' %}\r\n              {% set status_text = 'Already Windows 11' %}\r\n          {% else %}\r\n              {% set row_class = 'status-not-ready' %}\r\n              {% set badge_class = 'badge-not-ready' %}\r\n              {% set status_text = 'Not Ready - ' ~ device.custom_fields.Windows11Comp %}\r\n          {% endif %}\r\n      {% endif %}\r\n\r\n      <tr class=\"{{ row_class }}\">\r\n        <td>{{ device.site__client__name or 'N/A' }}</td>\r\n        <td>{{ device.site__name or 'N/A' }}</td>\r\n        <td>\r\n          <b>{{ device.hostname or 'N/A' }}</b><br>\r\n          {% if device.last_seen %}\r\n            <small {% if (report_run_timestamp - device.last_seen).days > 30 %} class=\"text-danger\" {% endif %}>\r\n              Last Seen: {{ device.last_seen.astimezone(ZoneInfo('America/New_York')).strftime('%Y-%m-%d %H:%M:%S') }}\r\n            </small>\r\n          {% else %}\r\n            <small>N/A</small>\r\n          {% endif %}\r\n        </td>\r\n        <td>{{ device.last_logged_in_user or 'N/A' }}</td>\r\n        <td style=\"word-wrap: break-word;\">{{ device.operating_system or 'N/A' }}</td>\r\n        <td style=\"text-align: center;\">\r\n          <span class=\"status-badge {{ badge_class }}\">{{ status_text }}</span>\r\n        </td>\r\n      </tr>\r\n      {% endfor %}\r\n    </tbody>\r\n  </table>\r\n</div>\r\n{% endblock %}",
    "type": "html",
    "depends_on": [
      "client"
    ],
    "template_variables": "data_sources:\r\n  agentsList:\r\n    custom_fields:\r\n      - Windows11Comp\r\n    filter:\r\n      site__client_id: '{{client.id}}'\r\n    model: agent\r\n    only:\r\n      - hostname\r\n      - last_logged_in_user\r\n      - site__client__name\r\n      - site__name\r\n      - operating_system\r\n      - last_seen\r\n      - plat\r\nreport_run_timestamp: !now"
  },
  "assets": []
}